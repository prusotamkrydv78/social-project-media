<div class="max-w-3xl mx-auto">
  <!-- Create Story Header -->
  <div class="mb-6">
    <h1 class="text-3xl font-bold bg-gradient-to-r from-primary-500 to-secondary-500 text-transparent bg-clip-text">Create Story</h1>
    <p class="text-dark-500 mt-2">Share a moment that disappears after 24 hours</p>
  </div>

  <!-- Create Story Form -->
  <div class="bg-white rounded-2xl shadow-sm overflow-hidden mb-6">
    <div class="p-6">
      <!-- User Info -->
      <div class="flex items-center space-x-3 mb-6">
        <div class="w-12 h-12 rounded-full bg-primary-500 flex items-center justify-center text-white font-bold">
          JD
        </div>
        <div>
          <h3 class="font-semibold text-dark-900">John Doe</h3>
          <div class="flex items-center text-dark-500 text-sm">
            <i class="fas fa-globe-americas mr-1.5"></i>
            <select class="bg-transparent border-none focus:ring-0 p-0 pr-6 text-dark-500">
              <option>Public</option>
              <option>Friends Only</option>
              <option>Close Friends</option>
            </select>
            <i class="fas fa-chevron-down ml-1 text-xs"></i>
          </div>
        </div>
      </div>

      <!-- Story Preview -->
      <div class="mb-6">
        <div class="aspect-[9/16] max-h-[70vh] bg-dark-100 rounded-xl overflow-hidden relative flex items-center justify-center">
          <div id="storyPreview" class="w-full h-full flex items-center justify-center text-dark-400">
            <div class="text-center">
              <i class="fas fa-image text-6xl mb-4"></i>
              <p>Preview will appear here</p>
            </div>
          </div>
          <div id="previewOverlay" class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 transition-opacity"></div>
          <div id="previewText" class="absolute bottom-6 left-6 right-6 text-white opacity-0 transition-opacity">
            <p class="text-lg font-medium" id="previewCaption"></p>
          </div>
        </div>
      </div>

      <!-- Upload Area -->
      <div class="border-2 border-dashed border-dark-200 rounded-xl p-8 mb-6 text-center">
        <div class="mb-4">
          <i class="fas fa-cloud-upload-alt text-4xl text-dark-400"></i>
        </div>
        <h4 class="font-semibold text-dark-800 mb-2">Upload media for your story</h4>
        <p class="text-dark-500 text-sm mb-4">Support for images and videos (max 15 seconds)</p>
        <input type="file" id="storyMedia" accept="image/*,video/*" class="hidden">
        <button 
          onclick="document.getElementById('storyMedia').click()" 
          class="bg-primary-500 text-white px-6 py-2.5 rounded-full hover:bg-primary-600 transition-colors shadow-sm"
        >
          Choose File
        </button>
      </div>

      <!-- Caption Input -->
      <div class="mb-6">
        <label for="storyCaption" class="block text-sm font-medium text-dark-700 mb-2">Add a caption</label>
        <textarea 
          id="storyCaption" 
          placeholder="Write something..." 
          class="w-full border border-dark-200 rounded-xl p-4 min-h-[80px] focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all resize-none"
          maxlength="150"
          oninput="updatePreview()"
        ></textarea>
        <div class="flex justify-end mt-1">
          <span class="text-xs text-dark-500"><span id="captionLength">0</span>/150</span>
        </div>
      </div>

      <!-- Story Options -->
      <div class="border-t border-dark-100 pt-6">
        <h3 class="font-semibold mb-4 flex items-center">
          <i class="fas fa-sliders-h text-primary-500 mr-2"></i>
          Story Options
        </h3>
        
        <div class="space-y-4">
          <!-- Allow Replies -->
          <div class="flex items-center justify-between">
            <div>
              <h4 class="font-medium text-dark-900">Allow Replies</h4>
              <p class="text-dark-500 text-sm">Let people reply to your story</p>
            </div>
            
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" value="" class="sr-only peer" checked>
              <div class="w-11 h-6 bg-dark-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-dark-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
            </label>
          </div>
          
          <!-- Close Friends Only -->
          <div class="flex items-center justify-between">
            <div>
              <h4 class="font-medium text-dark-900">Close Friends Only</h4>
              <p class="text-dark-500 text-sm">Only show to people on your close friends list</p>
            </div>
            
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" value="" class="sr-only peer">
              <div class="w-11 h-6 bg-dark-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-dark-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
            </label>
          </div>
          
          <!-- Hide View Count -->
          <div class="flex items-center justify-between">
            <div>
              <h4 class="font-medium text-dark-900">Hide View Count</h4>
              <p class="text-dark-500 text-sm">Don't show how many people viewed your story</p>
            </div>
            
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" value="" class="sr-only peer">
              <div class="w-11 h-6 bg-dark-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-dark-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"></div>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="flex justify-end space-x-3 mb-10">
    <a href="/" class="px-6 py-2.5 border border-dark-200 text-dark-700 rounded-full hover:bg-dark-50 transition-colors">
      Cancel
    </a>
    <button class="px-6 py-2.5 bg-primary-500 text-white rounded-full hover:bg-primary-600 transition-colors shadow-sm">
      Share Story
    </button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const storyMedia = document.getElementById('storyMedia');
    const storyPreview = document.getElementById('storyPreview');
    const previewOverlay = document.getElementById('previewOverlay');
    const previewText = document.getElementById('previewText');
    const storyCaption = document.getElementById('storyCaption');
    const previewCaption = document.getElementById('previewCaption');
    const captionLength = document.getElementById('captionLength');
    
    storyMedia.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      
      reader.onload = function(event) {
        if (file.type.startsWith('image/')) {
          storyPreview.innerHTML = `<img src="${event.target.result}" class="w-full h-full object-cover">`;
          previewOverlay.classList.add('opacity-100');
          previewText.classList.add('opacity-100');
        } else if (file.type.startsWith('video/')) {
          storyPreview.innerHTML = `
            <video src="${event.target.result}" class="w-full h-full object-cover" autoplay muted loop></video>
          `;
          previewOverlay.classList.add('opacity-100');
          previewText.classList.add('opacity-100');
        }
      };
      
      reader.readAsDataURL(file);
    });
    
    storyCaption.addEventListener('input', function() {
      captionLength.textContent = this.value.length;
      previewCaption.textContent = this.value;
    });
  });
  
  function updatePreview() {
    const storyCaption = document.getElementById('storyCaption');
    const previewCaption = document.getElementById('previewCaption');
    const captionLength = document.getElementById('captionLength');
    
    captionLength.textContent = storyCaption.value.length;
    previewCaption.textContent = storyCaption.value;
  }
</script>
